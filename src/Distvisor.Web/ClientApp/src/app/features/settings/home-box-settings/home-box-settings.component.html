<p-card header="Home Box" styleClass="p-mt-3">
    <h3>Gateway sessions:</h3>
    <p-table *ngIf="(gatewaySessions$ | async) as gs"
        dataKey="id" [value]="gs.items" [lazy]="true" [rows]="gs.rows" [rowsPerPageOptions]="gs.rowsPerPageOptions"
        [totalRecords]="gs.totalRecords" [loading]="gs.loading" [paginator]="true" [showCurrentPageReport]="true"
        (onLazyLoad)="lazyLoadGatewaySessions($event)">
        <ng-template pTemplate="header">
            <tr>
                <th>Generated at</th>
                <th>Status</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td>{{ item.tokenGeneratedAt | date:'short' }}</td>
                <td>{{ item.status }}</td>
                <td>
                    <button pButton pRipple class="p-button-info p-button-text" icon="pi pi-refresh" label="Refresh"
                        (click)="onRefreshSession(item)"></button>
                    <button pButton pRipple class="p-button-info p-button-text" icon="pi pi-trash" label="Delete"
                        (click)="onDeleteSession(item)"></button>
                </td>
            </tr>
        </ng-template>
        <ng-template pTemplate="emptymessage">
            <tr>
                <td colspan="3">No sessions found.</td>
            </tr>
        </ng-template>
    </p-table>
    <form (ngSubmit)="onLogin()">
        <h3 class="p-pt-3">Enable Home Box by login to gateway:</h3>
        <div class="p-fluid p-formgrid p-grid">
            <div class="p-field p-col-12 p-md-4">
                <label for="inputHomeBoxUser">User:</label>
                <input pInputText type="text" inputId="inputHomeBoxUser" name="inputHomeBoxUser"
                    [(ngModel)]="inputHomeBoxUser" />
            </div>
            <div class="p-col-8 p-d-none p-d-md-block"></div>
            <div class="p-field p-col-12 p-md-4">
                <label for="inputHomeBoxPassword">Password:</label>
                <p-password inputId="inputHomeBoxPassword" name="inputHomeBoxPassword"
                    [(ngModel)]="inputHomeBoxPassword" [feedback]="false" [toggleMask]="true"></p-password>
            </div>
        </div>
        <div class="p-mt-2">
            <button pButton pRipple class="p-button-info p-button-outlined" icon="pi pi-check" label="Login"
                type="submit"></button>
        </div>
    </form>
</p-card>